<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>投資シミュレーション</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <h1>貯蓄vs投資シミュレーション</h1>

        <div class="info-panel">
            <div class="info-item">
                <span class="label">貯蓄金利:</span>
                <span class="value"><span id="savingRateDisplay">0.3%</span> (年利)</span>
            </div>
            <div class="info-item">
                <span class="label">投資利回り:</span>
                <span class="value"><span id="investmentRateDisplay">5.0%</span> (年利)</span>
            </div>
            <div class="info-item">
                <span class="label">運用期間:</span>
                <span class="value" id="displayPeriod">金額と期間を入力してください</span>
            </div>
        </div>

        <div class="input-section">
            <label for="investmentRate">投資利回り (%):</label>
            <input type="number" id="investmentRate" min="0" max="100" step="0.1" value="5.0" placeholder="例: 5.0">

            <label for="monthlyAmount">毎月の積立金額 (万円):</label>
            <input type="number" id="monthlyAmount" min="1" step="1" placeholder="例: 3">

            <label for="investmentYears">投資期間 (年):</label>
            <input type="number" id="investmentYears" min="1" max="50" step="1" placeholder="例: 20">

            <button id="simulateBtn">グラフ作成</button>
        </div>

        <div class="result-section" id="resultSection" style="display: none;">
            <h2>シミュレーション結果</h2>

            <div class="chart-container">
                <canvas id="myChart"></canvas>
            </div>

            <div class="summary">
                <div class="summary-item saving">
                    <h3>貯蓄 (<span id="savingRateSummary">0.3%</span>)</h3>
                    <p class="amount" id="savingTotal">-</p>
                    <p class="detail">元本: <span id="savingPrincipal">-</span></p>
                    <p class="detail">利息: <span id="savingInterest">-</span></p>
                </div>
                <div class="summary-item investment">
                    <h3>投資 (<span id="investmentRateSummary">5.0%</span>)</h3>
                    <p class="amount" id="investmentTotal">-</p>
                    <p class="detail">元本: <span id="investmentPrincipal">-</span></p>
                    <p class="detail">運用益: <span id="investmentProfit">-</span></p>
                </div>
                <div class="summary-item difference">
                    <h3>差額</h3>
                    <p class="amount" id="difference">-</p>
                </div>
            </div>

            <div class="formula-section">
                <h3><span id="yearsInTitle">20</span>年後の資産はいくらになる？</h3>
                <div class="formula-explanation">
                    <p class="formula-title">複利で積み立てると、こんなに増える！</p>
                    <p class="formula-text">
                        <strong>複利</strong>とは、「利息に利息がつく」仕組みです。<br>
                        毎月積み立てたお金に利息がつき、その利息にもまた利息がつくので、雪だるま式に増えていきます。
                    </p>

                    <div class="formula-box">
                        <p class="formula-label"><span id="yearsInFormula1">20</span>年後の資産を計算する式：</p>
                        <p class="formula-math">
                            <span class="highlight"><span id="yearsInFormula2">20</span>年後の資産</span> = <span class="monthly">毎月の積立額</span> × {((1 + <span class="rate">月利</span>)<sup id="monthsInFormula">240</sup> - 1) ÷ <span class="rate">月利</span>}
                        </p>
                        <p class="formula-detail">
                            ※ 月利 = 年利 ÷ 12、<span id="monthsInDetail">240</span> = <span id="yearsInDetail">20</span>年 × 12ヶ月
                        </p>
                    </div>

                    <div class="formula-example">
                        <p class="example-title">例: <span id="formulaMonthlyAmount">3</span>万円を毎月積み立てた場合</p>

                        <div class="calc-step">
                            <p class="step-title"><strong>【投資の場合：年利<span id="investmentRateFormula">5%</span>】</strong></p>
                            <ul>
                                <li>月利 = <span id="investmentRateFormulaText">5%</span> ÷ 12 = <strong id="investmentMonthlyRate">0.004167</strong>（約0.42%）</li>
                                <li class="highlight-result" id="investmentCalc1"><span id="yearsInInvestCalc1">20</span>年後の資産 = ¥30,000 × {((1.004167)<sup>240</sup> - 1) ÷ 0.004167}</li>
                                <li class="highlight-result" id="investmentCalc2">　　　　　　 = ¥30,000 × {(2.712 - 1) ÷ 0.004167}</li>
                                <li class="highlight-result" id="investmentCalc3">　　　　　　 = ¥30,000 × 411</li>
                                <li class="highlight-result">　　　　　　 = <strong id="investmentResult">¥12,332,827</strong></li>
                            </ul>
                            <p class="calc-note">元本<span id="investmentPrincipalFormula">¥7,200,000</span> → <strong id="investmentProfitFormula">¥5,132,827</strong>も増加！</p>
                        </div>

                        <div class="calc-step">
                            <p class="step-title"><strong>【貯蓄の場合：年利<span id="savingRateFormula">0.3%</span>】</strong></p>
                            <ul>
                                <li>月利 = <span id="savingRateFormulaText">0.3%</span> ÷ 12 = <strong id="savingMonthlyRate">0.000250</strong>（約0.025%）</li>
                                <li class="highlight-result" id="savingCalc1"><span id="yearsInSavingCalc1">20</span>年後の資産 = ¥30,000 × {((1.000250)<sup>240</sup> - 1) ÷ 0.000250}</li>
                                <li class="highlight-result" id="savingCalc2">　　　　　　 = ¥30,000 × 247</li>
                                <li class="highlight-result">　　　　　　 = <strong id="savingResult">¥7,419,430</strong></li>
                            </ul>
                            <p class="calc-note">元本<span id="savingPrincipalFormula">¥7,200,000</span> → <strong id="savingInterestFormula">¥219,430</strong>しか増えない...</p>
                        </div>
                    </div>

                    <div class="comparison-note">
                        <p><strong>同じ金額を積み立てても、差は<span id="formulaDifference">¥4,913,397</span>！</strong></p>
                        <p>年利が違うだけで、<span id="yearsInComparison">20</span>年後にこんなに大きな差が生まれます。複利の力を実感してください！</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
